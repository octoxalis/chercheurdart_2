<:root>
        --{{C_o.STAT_a[0]}}_screen_dim: {{C_o.SCREEN_DIM_n}};
        --{{C_o.STAT_a[0]}}_hue_trace: -720;
        --{{C_o.STAT_a[0]}}_hue_back:  0;

        --{{C_o.STAT_a[0]}}_nav_dim: {{C_o.BURST_NAV_DIM_n}}px;
        --{{C_o.STAT_a[0]}}_trace_color: {{S_o.text_lo}};
        --{{C_o.STAT_a[0]}}_trace_pointer_s: url( /assets/styles/css/spot_cursor.svg ) 8 8, auto;
        --{{C_o.STAT_a[0]}}_trace_pointer: var(--{{C_o.STAT_a[0]}}_trace_pointer_s);

        --{{C_o.STAT_a[0]}}_scale: {{C_o.BURST_SCALE_n}};
        --{{C_o.STAT_a[0]}}_equal_scale: {{C_o.BURST_EQUAL_SCALE_n}};
        --{{C_o.STAT_a[0]}}_equal: none;

        --{{C_o.STAT_a[0]}}_canvas_dim: calc( (var(--{{C_o.STAT_a[0]}}_screen_dim) * {{C_o.SCREEN_RATIO_n}}) - ({{S_o.NAV_HEIGHT_s}} * 2));
        --{{C_o.STAT_a[0]}}_img_transform: 80vmin;

        --{{C_o.STAT_a[0]}}_img_bg_hue: {{S_o.hue_p}};
        --{{C_o.STAT_a[0]}}_img_bg_sat: 70;
        --{{C_o.STAT_a[0]}}_img_bg_lum: 50;
        --{{C_o.STAT_a[0]}}_img_bgtransparent: {{S_o.bgtransparent_s}};
        --{{C_o.STAT_a[0]}}_img_bgwhite: {{S_o.bg_100}};
        --{{C_o.STAT_a[0]}}_img_bgblack: {{S_o.bg_0}};
        --{{C_o.STAT_a[0]}}_img_background: var(--{{C_o.STAT_a[0]}}_img_bgtransparent);
        --{{C_o.STAT_a[0]}}_img_label_size: 100%; /*calc( 150 / var(--{{C_o.STAT_a[0]}}_img_scale)  * 1%);*/  /* initial 150% */
        --{{C_o.STAT_a[0]}}_satlum_s: none;    /* don't display at start: no slot selected */

        --{{C_o.STAT_a[0]}}_playback_bg: transparent;
        --{{C_o.STAT_a[0]}}_playback_pause: auto;


        /* --{{C_o.STAT_a[0]}}_img_slot_fromHue_n: 0 */   /* set by burst.js */
        /* --{{C_o.STAT_a[0]}}_img_slot_toHue_n: 0 */     /* set by burst.js */
        /* --{{C_o.STAT_a[0]}}_hue_img_scale: 1; */       /* set by burst.js */
        /* --{{C_o.STAT_a[0]}}_hue_img_height: 20vh;*/

        --{{C_o.STAT_a[0]}}_img_play: '{{C_o.IMG_PLAY_s}}';

        --{{C_o.STAT_a[0]}}_zoom_out_s: none;  /* none || flex */
</:root>

<section#{{C_o.STAT_a[0]}}>
  <div[id^={{C_o.DIV_ID_s}}_stat]>
    <canvas>
            width: var(--{{C_o.STAT_a[0]}}_canvas_dim);
            height: var(--{{C_o.STAT_a[0]}}_canvas_dim);
            border: 1px solid {{ S_o.light_05}};
            border-radius: 50%;
            background: var(--{{C_o.STAT_a[0]}}_img_background);
    </canvas>
    <nav[id^={{C_o.NAV_ID_s}}_{{C_o.STAT_a[0]}}]>
            display: none;
            width: var(--{{C_o.STAT_a[0]}}_nav_dim);
            height: var(--{{C_o.STAT_a[0]}}_nav_dim);
            padding: {{S_o.PAD_8}};
            border-radius: 50%;
            transition: opacity ease 2s;
      <label>
              display: flex;
              justify-content: space-between;
              align-items: center;
              width: 100%;
              height: {{S_o.PAD_8}};
              line-height: {{S_o.PAD_8}};    /* vertical-align */
              /*font-size: 80%;*/
              text-transform: uppercase;
        <span:not( [data-icon] )>
                display: flex;
                justify-content: space-evenly;
                width: 10ch;
                height: {{S_o.PAD_8}};
                line-height: {{S_o.PAD_8}};    /* vertical-align */
                background: var(--{{C_o.STAT_a[0]}}_trace_color);
                font-weight: 500;
                text-align: center;
                border-radius: 4px;                
        </span>
        <span[id$=_ratio_n]:after>
                content: '{{C_o.PERCENT_s}}';
        </span>
      </label>
      <label:nth-of-type(3)>
      context( copy, next )
      </label>
      <label:nth-of-type(4)>
              display: var(--{{C_o.STAT_a[0]}}_satlum_s);
      </label>
    </nav>
    <nav[id^={{C_o.NAV_ID_s}}_{{C_o.STAT_a[0]}}]:hover>
            opacity: 1;
            transition: opacity ease .2s;
            background: {{S_o.light_05}};
            box-shadow: 0 0 0 1000vmax {{S_o.light_07}};
      <label>
        <span>
                opacity: 1;
        </span>
      </label>
      <label:hover>
        <span>
                background: transparent;
        </span>
      </label>
      <label:not([for]):hover>
        <span>
                background: {{S_o.light_07}};
        </span>
      </label>
    </nav>
  </div>
</section>

<canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue>
        cursor: var(--{{C_o.STAT_a[0]}}_trace_pointer);
</canvas>

<!--variant-->
<input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_hue:checked />
~
<canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue>
        context( copy, next )
</canvas>
<input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_sat:checked />
~
<canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_sat>
        context( copy, next )
</canvas>
<input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_lum:checked />
~
<canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_lum>
        display: block;
</canvas>
<!--variant-->
<input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_hue:checked />
~
<nav#{{C_o.NAV_ID_s}}_{{C_o.STAT_a[0]}}_hue>
        context( copy, next )
</nav>
<input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_sat:checked />
~
<nav#{{C_o.NAV_ID_s}}_{{C_o.STAT_a[0]}}_sat>
        context( copy, next )
</nav>
<input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_lum:checked />
~
<nav#{{C_o.NAV_ID_s}}_{{C_o.STAT_a[0]}}_lum>
        display: flex;
</nav>


context( stack, new )
<div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_settings>
        display: none;
        z-index: 10;
        position: fixed;
        top: 0;
        left: 0;
        width: {{S_o.NAV_SETTINGS}};  /* MANDATORY */
        height: fit-content;
context( block, settings )
        border: 1px solid {{S_o.bg_hi}};
        /*box-shadow: 0 0 0 1000vmax {{S_o.light_07}};*/
        transform: translateX( -{{S_o.NAV_SETTINGS}} );
        transition: transform .5s ease;
</div>
<!--variant-->
<input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_settings:checked />
~
<div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_settings>
        display: block;
        height: fit-content;
        overflow-X: hidden;
        overflow-Y: auto;
        transform: translateX( 0 );
  <aside>
          display: flex;
          flex-direction: column;
          padding: {{S_o.PAD_2}} 0;
          width: 100%;
          height: fit-content;
    <nav>
            flex-direction: column;
            gap: {{S_o.PAD_6}};
      <label>
        <span[data-role]>
                background: {{S_o.dot_set_4}};
                border-radius: 6px;
        </span>
      </label>
      <label:hover>
        <span>
                background: transparent;
        </span> 
      </label>
    </nav>

  </aside>
</div>


context( stack, new )
<div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_slide_hue>
        display: flex;
        flex-direction: column;
        position: relative;
        margin: 0 {{S_o.PAD_8}};    /* left space for input data-tip */
        padding: {{S_o.PAD_6}};
        height: fit-content;
  <div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_hue_slot>
          display: grid;
    <hr[role=vrange]>
            grid-area: 1/-1;
            position: relative;
            top: 3rem;              /* see ul:translate */
            left: 7.2rem;
            width: 96%;
            height: 0;
            border-color: {{S_o.text_lo}};
            pointer-events: none;        /* above input */
            transform-origin: top left;
            transform: rotate( 90deg );
    </hr>
    <ul#{{C_o.LIST_ID_s}}_{{C_o.STAT_a[0]}}_hue_slot>
            grid-area: 1/-1;
            display: flex;
            /*flex-direction: row;*/
            justify-content: space-between;
            flex-wrap: wrap;
            margin: {{S_o.PAD_2}} 0;
            gap: 4px;
            width: 720px;
            height: fit-content;
            transform: translate( 8rem, 2rem ) rotate( 90deg ) scaleY( 1 );
            transform-origin: top left;
      <li[data-slot_n]>
              display: grid;
              justify-content: space-between;
              width: fit-content;
              list-style: none;
              opacity: 1;
              filter: brightness( {{S_o.brightness_hi}} );
              transform: rotate( -90deg );
        <input[name$="_slot"]>
                appearance: none;
                grid-area: 1/-1;
                width: 32px;
                height: 32px;
                border: 12px solid {{S_o.light_100}};
                border-radius: 50%;
                background: {{S_o.text_lo}};
                filter: brightness( .8 );
        </input>
      </li>
      <li[data-slot_n]:before>
              content: attr( data-slot_n );
              position: absolute;
              left: -4px;
              width: 4ch;
              text-align: center;
              padding: {{S_o.PAD_1}};
              color: currentColor;
              background: {{S_o.text_lo}};
              font-size: 80%;
              font-weight: 200;
              border-radius: 4px;
              transform: scale( 0 );
              transform-origin: center;
      </li>
      <li[data-slot_n]:hover>
          <span>
                opacity: 1;
          </span>
        <input>
                opacity: 0;
        </input> 
      </li>
      <li[data-slot_n]:has(input:checked)>
          <span>
                opacity: 1;
          </span>
        <input:checked>
                opacity: 0;
        </input> 
      </li>
      <li[data-slot_n]:has(input:checked):before>
              filter: brightness( {{S_o.brightness_hi2}} );
              transform: scale( 1 );
      </li>
      <li[data-slot_n]:hover:before>
              filter: brightness( {{S_o.brightness_lo2}} );
              transform: scale( 1 );
      </li>
    </ul>
  </div>

  <input[type=range] />
          display: none;
          position: absolute;
          margin: -{{S_o.PAD_4}} 0;
  context(block, input_range)
          transform: translate( -{{S_o.PAD_2}}, - ) rotate( 90deg ) scaleY( .3 );
          transform-origin: top left;
  <input[type=range]:focus />
          outline: none;
  <input[type=range]::-webkit-slider-runnable-track />
          width: 100px;
          height: 16px;
  <div:not([id="{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_hue_slot"])>
            display:flex;
            justify-content: space-between;
            gap: 16px;
            width: fit-content;
     <canvas>
            /* flex row */
            width: 48px;
            height: 720px;
            background: transparent;
     </canvas>
     <canvas:nth-of-type(1)>
            cursor: var(--{{C_o.STAT_a[0]}}_trace_pointer);
     </canvas>
  </div>
  
  <label#{{C_o.LABEL_ID_s}}_{{C_o.STAT_a[0]}}_hue_trace>
          top: calc( var(--{{C_o.STAT_a[0]}}_hue_trace) * 1px - 14px );  /* vertical centering */
  </label>
  <label#{{C_o.LABEL_ID_s}}_{{C_o.STAT_a[0]}}_sat_trace>
          top: calc( var(--{{C_o.STAT_a[0]}}_sat_trace) * 1px  - .33em );
  </label>
  <label#{{C_o.LABEL_ID_s}}_{{C_o.STAT_a[0]}}_lum_trace>
          top: calc( var(--{{C_o.STAT_a[0]}}_lum_trace) * 1px  - .33em );
  </label>
  <label[id$="_trace"]>
          display: flex;
          justify-content: space-between;
          position: relative;
          left: -50px;
          width: fit-content;
    <output>
            position: relative;
            padding: {{S_o.PAD_1}};
            width: 4ch;
            color: currentColor;
            background: {{S_o.text_lo}};        /* = span background */
            font-size: 80%;
            font-weight: 200;
            border-radius: 4px;
            opacity: 1;
            filter: brightness( {{S_o.brightness_hi2}} );
    </output>
    <span>
            width: 2ch;
            color: {{S_o.text_lo}};            /* = output background */
    </span>
  </label>
  <label[id$="_trace"]:hover>
          cursor: url( /assets/styles/css/paint_brush.svg ) 32 32, auto;
    <output>
            filter: brightness( {{S_o.brightness_lo2}} );
    </output>
    <span>
            filter: brightness( {{S_o.brightness_lo2}} );
    </span>
  </label>

  <div[id^={{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_thresh_]>
          display: flex;
          flex-direction: column;
          align-items: center;
          position: relative;
          left: -1.5rem;
          margin: {{S_o.PAD_2}} 0;
    <input[type=range]>
    context(block, input_range)
    </input>
    <label>
            position: relative;
            padding: {{S_o.PAD_1}};
            width: 100%;
            text-align: center;
            font-size: 80%;
            opacity: .5;
    </label>
  </div>
  <div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_thresh_hi>
    <input[type=range]>
              transform: rotate( 180deg ); /* from right to left slider */
    </input>
    <input[type=range]:before>
    context( copy, next )
    </input>
    <input[type=range]:after>
                transform: rotate( -180deg );
    </input>
  </div>
  <div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_thresh_lo>
    <input[type=range]>
              /*transform: scaleY( {{C_o.INPUT_RANGE_SCALEY_n}} );*/
   </input>
  </div>
</div>



context( stack, new )
<body:has( input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}:checked  )>
  <label#goto_{{C_o.MAIN_DOCK}}>
  context( copy, next )
  </label>
  <label#goto_{{C_o.PLACE_CENTER}}>
  context( copy, next )
  </label>
  <label#goto_{{C_o.FULL_SCREEN}}>
          display: block;
  </label>
  <div#goto_{{C_o.STAT_a[0]}}_equal>
          display: var(--{{C_o.STAT_a[0]}}_equal);
          z-index: 19;
          position: absolute;
          --equal_ratio: calc( var(--{{C_o.STAT_a[0]}}_screen_dim) * var(--{{C_o.STAT_a[0]}}_scale) );
          top:  calc( 50vh - var(--equal_ratio) * .5px  );
          left: calc( 50vw - var(--equal_ratio) * .5px  );
          width:  calc( var(--equal_ratio) * 1px );
          height: calc( var(--equal_ratio) * 1px );
          border-radius: 50%;
          background: {{S_o.light_05}};
          filter: brightness( .01 ); 
          pointer-events: none;
          transform-origin: center;
          transform: scale( var(--{{C_o.STAT_a[0]}}_equal_scale) );
          transition: .3s ease;  /*!!!! don't set transform */
  </div>
  <div#goto_{{C_o.STAT_a[0]}}_equal>
          display: none;
  </div>
  <input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_equal:checked />
  ~
  <div#goto_{{C_o.STAT_a[0]}}_equal>
          display: block;
  </div>
</body>

context( stack, new )
<body:has( input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_hue_img_position:checked )>
  <section#{{C_o.STAT_a[0]}}>
    <div[id^={{C_o.DIV_ID_s}}_stat]>
      <div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_settings>
              /*display: none;*/
        <aside>
          <div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_slide_hue>
                  display: none;
          </div>
        </aside>
      </div>
    </div>
  </section>

  <div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_settings>
          box-shadow: 0 0 0 1000vmax {{S_o.light_01}};
          transition: box-shadow .5s ease;
    <aside>
      <div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_slide_hue>
              display: none;
      </div>
    </aside>
  </div>

  <div#goto_{{C_o.STAT_a[0]}}_equal>
          opacity: 0;
          transition: .3s ease;
  </div>
</body>


<aside#aside_{{C_o.STAT_a[0]}}_hue_img>
        display: none;
</aside>

context( stack, new )
<body:has( input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_hue_img:checked )>
  <section#{{C_o.STAT_a[0]}}>
    <div[id^={{C_o.DIV_ID_s}}_stat]>
      <aside#aside_{{C_o.STAT_a[0]}}_hue_img>
              z-index: 21;
              display: flex;
              flex-direction: column;
              justify-content: center;
              align-items: center;
              position: fixed;
              background: {{S_o.bg_hi}};
              box-shadow: 0 0 0 1000vmax {{S_o.light_07}};
              transform-origin: center;
              transform: scale( var(--{{C_o.STAT_a[0]}}_hue_img_scale) ); /* from burst.js */
        <canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue_img:not(.fullsize)>
              max-width: 1000vw;  /* i.e. no max */
              background: var(--{{C_o.STAT_a[0]}}_img_background);
              cursor: zoom-in;
              transition: all .5s ease;
        </canvas>
        <canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue_img class='fullsize'>
              z-index: 100;       /* cover all */
              position: absolute;
              /*width: auto;*/
              cursor: move;
              box-shadow: 0 0 0 1000vmax {{S_o.light_100}};
              transition: all .5s ease;
        </canvas>
      </aside>
      <!--variant-->
      <input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_hue_img_position:not(:checked)>
      </input>
      ~
      <aside#aside_{{C_o.STAT_a[0]}}_hue_img>
              position: fixed;
              top: 100vh;
              left: 0;
              border-radius: 4px;
              box-shadow: none;
              filter: none;
              transform-origin: top left;
              transform: scale( {{C_o.BURST_TRANSFORM_SCALE_n}} ) translateY( -100% );
              transition: transform .2s;
        <canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue_img>
              max-width: 100vmin;
              transition: transform .2s;
        </canvas>
      </aside>
    </div>
  </section>
</body>


context( stack, new )
<body:has( canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue_img.fullsize )>
  <section#{{C_o.STAT_a[0]}}>
    <div[id^={{C_o.DIV_ID_s}}_stat]>
      <aside#aside_{{C_o.STAT_a[0]}}_hue_img>
        <div#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue_img_back>
                width: {{S_o.FULL_WIDTH_s}};
                height: {{S_o.FULL_HEIGHT_s}};
                background: var(--{{C_o.STAT_a[0]}}_img_background);
        </div>
        <ul>
                display: none;
        </ul>
        <div:not(#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue_img_back)>
                display: none;
        </div>
      </aside>
    </div>
  </section>
</body>

context( stack, new )
<body:has( canvas#{{C_o.CANVAS_ID_s}}_{{C_o.STAT_a[0]}}_hue_img:not(.fullsize) )>
  <section#{{C_o.STAT_a[0]}}>
    <div[id^={{C_o.DIV_ID_s}}_stat]>
      <aside#aside_{{C_o.STAT_a[0]}}_hue_img>
        <ul>
                display: flex;
        </ul>
        <div>
                display: flex;
        </div>
      </aside>
    </div>
  </section>
</body>


context( stack, new )
<body:has( section#{{C_o.STAT_a[0]}} div[id^={{C_o.DIV_ID_s}}_stat] input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_sat:checked )>
  <section#{{C_o.STAT_a[0]}}>
    <div[id^={{C_o.DIV_ID_s}}_stat]>
      <aside#aside_{{C_o.STAT_a[0]}}_hue_img>
      context( copy, next )
      </aside>
    </div>
  </section>
</body>


context( stack, new )
<body:has( section#{{C_o.STAT_a[0]}} div[id^={{C_o.DIV_ID_s}}_stat] input#{{C_o.INPUT_ID_s}}_{{C_o.STAT_a[0]}}_lum:checked )>
  <section#{{C_o.STAT_a[0]}}>
    <div[id^={{C_o.DIV_ID_s}}_stat]>
      <aside#aside_{{C_o.STAT_a[0]}}_hue_img>
              display: none;
      </aside>
    </div>
  </section>
</body>


context( stack, new )
<dialog#dialog_{{C_o.STAT_a[0]}}_download>
        display: none;
        position: absolute;
        margin: auto;
        padding: {{S_o.PAD_4}};
        width: clamp(40ch, 80ch, 80vw);
        background: {{S_o.bg_hi}};
        border: none;
        border-radius: 4px;
  <form>
          grid-area: 1/-1
    <div#{{C_o.DIV_ID_s}}_{{C_o.STAT_a[0]}}_download>
              display: flex;
              flex-direction: column;
      <header>
              display: flex;
              gap: {{S_o.PAD_8}};
              border-bottom: 1px solid {{S_o.text}};
              text-transform: uppercase;
        <label>
                width: 2rem;
                height: 2rem;
                text-transform: uppercase;
                font-size: 120%;
                font-weight: 600;
                color: {{S_o.text}};
        </label>
        <label:nth-of-type(1)>
                flex-grow: 2;
        </label>
        <label:nth-of-type(2)>
                color: {{S_o.green_100}};
        </label>
        <label:not(:nth-of-type(1)):hover>
                filter: brightness( 4 );
        </label>
        <input>
                display: none;
        </input>
      </header>
      <label>
              margin-top: 1rem;
              color: {{S_o.bg}};
              font-size: 90%;
              font-style: italic;
              font-weight: 200;
      </label>
      <p>
              color: {{S_o.text}};
      </p>
    </div>
  </form>
</dialog>
<dialog#dialog_{{C_o.STAT_a[0]}}_download[open]>
        display: grid;
</dialog>
<dialog#dialog_{{C_o.STAT_a[0]}}_download[open]::backdrop>
        background: {{S_o.light_09}};
</dialog>


<input[type=range]:after />
        /*font-size: var(--{{C_o.STAT_a[0]}}_img_label_size);*/
</input>


/* override toolset position */
<nav#{{C_o.NAV_ID_s}}_toolset_zoom>
          display: var(--{{C_o.STAT_a[0]}}_zoom_out_s);
          /*top: 0*/
</nav>


  context( url, stat_burst_sequencer.context.html )
