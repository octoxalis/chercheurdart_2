
const BUR_o={status_o:null,trace_o:null,hueFreeze_b:!1,scale_o:{hue_n:1,sat_n:1,lum_n:1},hue_n:0,hsl__s:()=>document?.querySelector('input[name="burst_nav"]:checked')?.id.slice(-3),angle__n(e,_=360){const t=.5*document.getElementById("CA_burst_hue").width,o=e.offsetX-t,s=e.offsetY-t;return~~((~~(180*Math.atan2(s,o)/Math.PI)+450)%360/360*_)},message__v(e){const{task_s:_}=e;switch(_){case"PUT_frequency":const{part_s:_,frequency_n:t,capacity_n:o}=e;BUR_o.trace_o[`${_}Ratio_e`].innerHTML=t.toLocaleString();break;case"PUT_status":BUR_o.status_o=e.status_o;break;case"PUT_error":console.log(`ERROR: ${e.error_s}`)}},range__v:(e,_)=>{const t=e.value;e.dataset.tip=t;const[,,,o]=e.id.split("_");_&&_(o,t)},rangeEvent__v:e=>{BUR_o.range__v(e.target,((e,_)=>{const t=BUR_o.hsl__s();BUR_o[`${e}_o`][`${t}_n`]=+_,BUR_o.worker_o.post__v({task_s:"PUT_scale",stat_s:"burst",part_s:t,scale_n:BUR_o.scale_o[`${t}_n`]})}))},listener__v(){BUR_o.trace_o={hue_e:document.getElementById("burst_hue_n"),hueRatio_e:document.getElementById("burst_hue_ratio_n"),sat_e:document.getElementById("burst_sat_n"),satRatio_e:document.getElementById("burst_sat_ratio_n"),lum_e:document.getElementById("burst_lum_n"),lumRatio_e:document.getElementById("burst_lum_ratio_n")};const e=e=>{const _=BUR_o.hsl__s();if(!BUR_o.hueFreeze_b||"hue"!==_){let t=BUR_o.angle__n(e,"hue"===_?360:101);BUR_o.trace_o[`${_}_e`].innerHTML=t,BUR_o.worker_o.post__v({task_s:"GET_frequency",stat_s:"burst",part_s:_,frequency_n:t})}if("click"===e.type&&"hue"===_){BUR_o.hueFreeze_b=!BUR_o.hueFreeze_b;for(let e of["sat","lum"])BUR_o.worker_o.post__v({task_s:"PUT_draw",stat_s:"burst",part_s:e,hue_n:+BUR_o.trace_o.hue_e.innerHTML})}};for(let _ of["hue","sat","lum"])for(let t of["click","mousemove"])document.getElementById(`CA_burst_${_}`)?.addEventListener(t,e);DOM_o.beforeNode__e(document.getElementById("DI_burst_layer_view"),"goto_page_top");for(let e of["scale"])for(let _ of["click","keydown"])DOM_o.listener__v(`IN_burst_view_${e}`,BUR_o.rangeEvent__v,_)}};BUR_o.worker_o=STAT_o.worker__o("burst",["hue","sat","lum"],"LogScale Painter ColorBurst",BUR_o.message__v),BUR_o.worker_o.post__v({task_s:"PUT_draw",stat_s:"burst",part_s:"hue"}),BUR_o.listener__v();