
const BUR_o={SCALE_V_n:2,status_o:null,trace_o:null,hueFreeze_b:!1,scale_o:{hue_n:1,sat_n:1,lum_n:1},hue_n:0,hue_o:{rangeY_n:"36"},rangeY_a:[180,120,90,72,60,45,40,36,30,24,20,18,15,12,10,9,8,6,5,4,3,2,1],rotate_n:0,hsl__s:()=>document?.querySelector('input[name="burst_nav"]:checked')?.id.slice(-3),angle__n(_,e=360){const t=.5*document.getElementById("CA_burst_hue").width,o=_.offsetX-t,r=_.offsetY-t;return~~((~~(180*Math.atan2(r,o)/Math.PI)+450)%360/360*e)},message__v(_){const{task_s:e}=_;switch(e){case"PUT_frequency":const{part_s:e,frequency_n:t,capacity_n:o}=_;BUR_o.trace_o[`${e}Ratio_e`].innerHTML=new Intl.NumberFormat("de-DE").format(t);break;case"PUT_status":BUR_o.status_o=_.status_o;break;case"PUT_error":console.log(`ERROR: ${_.error_s}`)}},draw__v(){for(let _ of["hue_back","hue_front"])if(BUR_o.worker_o.post__v({task_s:"PUT_draw",stat_s:"burst",part_s:_,back_hue_n:+DOM_o.rootVar__s("--burst_back_hue"),rangeY_n:+BUR_o.hue_o.rangeY_n}),_.endsWith("_back")){const e=_.slice(0,-"_back".length),t=360;DOM_o.rootVar__v(`--burst_${e}_trace`,-2*(t-document.getElementById(`output_burst_${e}`).value))}},range__v(_,e){const t=_.value;_.dataset.tip=t;const[,,,o]=_.id.split("_");e&&e(o,t)},rangeEvent__v(_){BUR_o.range__v(_.target,((e,t)=>{const o=BUR_o.hsl__s();switch(e){case"scale":BUR_o[`${e}_o`][`${o}_n`]=+t,BUR_o.worker_o.post__v({task_s:"PUT_scale",stat_s:"burst",part_s:o,scale_n:BUR_o.scale_o[`${o}_n`]});break;case"rangeY":let r=+t,a=0;for(;BUR_o.rangeY_a[a]>r;)++a;BUR_o.hue_o.rangeY_n=BUR_o.rangeY_a[a],_.target.value=BUR_o.hue_o.rangeY_n,_.target.dataset.tip=BUR_o.hue_o.rangeY_n,BUR_o.draw__v()}}))},rotate__v(_){_.preventDefault();const e=_.target.closest("label");if(e){const _=e.id.split("_")[2],t=document.querySelector(`label[id$="${_}_trace"] > output`).value;DOM_o.rootVar__v(`--burst_back_${_}`,BUR_o.rotate_n-+t),rotate_n=+t}},hslEvent__v(_){const{offsetX:e,offsetY:t}=_,[,,o]=_.target.id.split("_"),r=~~(+t/BUR_o.SCALE_V_n);DOM_o.rootVar__v(`--burst_${o}_trace`,-2*(360-r)),document.getElementById(`output_burst_${o}`).value=r},listener__v(){BUR_o.trace_o={hue_e:document.getElementById("burst_hue_n"),hueRatio_e:document.getElementById("burst_hue_ratio_n"),sat_e:document.getElementById("burst_sat_n"),satRatio_e:document.getElementById("burst_sat_ratio_n"),lum_e:document.getElementById("burst_lum_n"),lumRatio_e:document.getElementById("burst_lum_ratio_n")};const _=_=>{const e=BUR_o.hsl__s();if(!BUR_o.hueFreeze_b||"hue"!==e){let t=BUR_o.angle__n(_,"hue"===e?360:101);BUR_o.trace_o[`${e}_e`].innerHTML=t,BUR_o.worker_o.post__v({task_s:"GET_frequency",stat_s:"burst",part_s:e,frequency_n:t})}if("click"===_.type&&"hue"===e){BUR_o.hueFreeze_b=!BUR_o.hueFreeze_b;for(let _ of["sat","lum"])BUR_o.worker_o.post__v({task_s:"PUT_draw",stat_s:"burst",part_s:_,back_hue_n:+BUR_o.trace_o.hue_e.innerHTML})}};for(let e of["hue","sat","lum"])for(let t of["click","mousemove"])document.getElementById(`CA_burst_${e}`)?.addEventListener(t,_);for(let _ of["hue"]){for(let e of["rangeY_n"])for(let t of["click","keydown"])DOM_o.listener__v(`IN_burst_${_}_${e}`,BUR_o.rangeEvent__v,t);DOM_o.listener__v(`CA_burst_${_}_front`,BUR_o.hslEvent__v),DOM_o.listener__v(`LA_burst_${_}_trace`,BUR_o.rotate__v)}DOM_o.beforeNode__e(document.getElementById("DI_burst_layer_view"),"goto_page_top");for(let _ of["scale"])for(let e of["click","keydown"])DOM_o.listener__v(`IN_burst_view_${_}`,BUR_o.rangeEvent__v,e)},init__v(){BUR_o.worker_o=STAT_o.worker__o("burst",["hue","sat","lum","hue_back","hue_front"],"LogScale Painter ColorBurst",BUR_o.message__v),BUR_o.draw__v(),BUR_o.listener__v()}};BUR_o.init__v();