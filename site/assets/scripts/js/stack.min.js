
class DragElement{gapX_n=0;gapY_n=0;offsetX_n=0;offsetY_n=0;atX_n=0;atY_n=0;constructor(e,t){this.drag_e=e,this.keep_b=t||!1,this.start__v()}start__v(){const e=this;this.drag_e.addEventListener("mousedown",(t=>(e.loose_b=!1,e.gapX_n=t.clientX-e.offsetX_n,e.gapY_n=t.clientY-e.offsetY_n,e.listen__v(["mousemove","mouseup"],"add"),!1)))}disable__v(){this.loose_b=!0}listen__v(e,t="remove"){for(let _ of e)this.drag_e[`${t}EventListener`](_,this,!1)}handleEvent(e){return!this.loose_b&&("mousemove"===e.type?(this.atX_n=e.clientX-this.gapX_n,this.atY_n=e.clientY-this.gapY_n,this.offsetX_n=this.atX_n,this.offsetY_n=this.atY_n,this.drag_e.style.transform=`translate3d(${this.atX_n}px, ${this.atY_n}px, 0)`,console.log(`${this.atX_n}px /  ${this.atY_n}px`),!1):("mouseup"===e.type&&(this.keep_b||this.listen__v(["mousemove","mouseup"]),this.loose_b=!0),!1))}}const STACK_o={status_o:null,ui:{},message__v:e=>{switch(e.task_s){case"PUT_status":STACK_o.status_o=e.status_o;break;case"PUT_error":console.log(`ERROR: ${e.error_s}`)}},beforeNode__v:(e,t)=>{const _=document.getElementById(t);return _?_.parentNode.insertBefore(e,_):null},fragment__e:(e,t)=>{const _=document.createRange().createContextualFragment(e);return STACK_o.beforeNode__v(_,t)},img__e:(e,t)=>{const _=document.createElement("img");return _.addEventListener("load",(e=>t&&t(_))),_.src=`assets/media/img/${e}/full/max/0/color.avif`,_},addWork__v:e=>{const t=document.getElementById("DI_stack_layers_items").children.length-2;let _="",s="";t&&(_=" draggable=true",s=`<input id="input_${e}_${t}" data-layer_n=${t} type="checkbox"><label for="input_${e}_${t}">&#8917;</label>`),STACK_o.fragment__e(`<li data-layer_n=${t}${_}>\n        <label>${t} &#8942; ${e}</label>\n        ${s}\n        </li>`,"LI_stack_add"),STACK_o.beforeNode__v(STACK_o.img__e(e,(_=>{_.id=`img_${e}_${t}`,_.dataset.layer_n=t,t&&_.setAttribute("draggable",!0)})),"stack_scale"),STACK_o.fragment__e(`<input  id="IN_stack_layer_animation_play_${t}" data-layer_n=${t} name=stack_animation type="radio">\n        <label for="IN_stack_layer_animation_play_${t}" data-layer_n=${t}>\n          <svg class="svg_icon">\n            <use href="#stack_circle"></use>\n            <title>${t} &#8942; ${e}</title>\n          </svg>\n        </label>`,"IN_stack_layer_animation_play")},listener__v(){for(op_e of Array.from(document.querySelectorAll('[id^="stack_scale_"]')))op_e.addEventListener("click",(e=>{const t=e.target.id.slice(-3),_=window.getComputedStyle(document.documentElement).getPropertyValue("--stack_img_width"),s="inc"===t?10:-10;document.documentElement.style.setProperty("--stack_img_width",+_+s)}));for(let e of["add_remote"]){const t=document.getElementById(`LA_stack_${e}`);t&&t.addEventListener("click",(t=>{document.getElementById(`IF_stack_${e}`)&&IND_o.adopt__v("DI_stack_settings",`IF_stack_${e}`,((e,t)=>{const _=t.querySelector("#script_stack_imgs");_&&(_.src=_.dataset.src)}))}))}},init__v(){STACK_o.addWork__v(document.querySelector("body").dataset.work_s),STACK_o.listener__v()}};STACK_o.init__v();