
class WorkerClient{constructor(s){Object.assign(this,s),this.port_o=new SharedWorker(this.url_s).port,this.port_o.onerror=s=>console.log`ERROR: ${s.message}`,this.port_o.onmessage=s=>this.message__v(s.data)}message__v(s){s.client_s&&s.client_s!==this.client_s||this.handleMessage__v(s)}post__v(s){this.port_o.postMessage(s)}}const STAT_o={worker_o:null,get_scan_a:["burst","aster","paint"],canvas__e(s,t){const e=document.querySelector(`#canvas_${s}_${t}`);return e.width*=window.devicePixelRatio,e.height*=window.devicePixelRatio,e},message__v(s){s.task_s},putCanvas__v(s,t,e,_,o){for(let o of t){const t=STAT_o.canvas__e(s,o).transferControlToOffscreen();_.port_o.postMessage({task_s:"PUT_canvas",stat_s:s,part_s:o,canvas_e:t,script_s:e,pixel_n:window.devicePixelRatio},[t])}},worker__o(s,t,e,_){const o=new WorkerClient({url_s:"/assets/scripts/js/stat_w.min.js",stat_s:s,handleMessage__v:_});switch(s){case"burst":case"aster":case"paint":STAT_o.putCanvas__v(s,t,e,o)}return o},adopt__v(s){document.getElementById(`IF_${s}`)&&IND_o.adopt__v(s,//!!! section id=stat_s
`IF_${s}`,((t,e)=>{const _=e.querySelector(`#script_${s}`);_&&(_.src=_.dataset.src)}))},listener__v(){for(let s of["burst","aster","paint","match"]){const t=document.getElementById(`LA_${s}`);t&&t.addEventListener("click",(()=>STAT_o.adopt__v(s)),{once:!0})}},init__v(s,t){STAT_o.worker_o=new WorkerClient({url_s:"/assets/scripts/js/stat_w.min.js",stat_s:"stat",handleMessage__v:STAT_o.message__v}),STAT_o.get_scan_a.includes(t)&&STAT_o.worker_o.post__v({task_s:"GET_scan",stat_s:"stat",work_s:s})}};STAT_o.listener__v();