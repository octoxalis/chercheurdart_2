
class WorkerClient{constructor(e){Object.assign(this,e),this.port_o=new SharedWorker(this.url_s).port,this.port_o.onerror=e=>console.log`ERROR: ${e.message}`,this.port_o.onmessage=e=>this.message__v(e.data)}message__v(e){e.client_s&&e.client_s!==this.client_s||this.handleMessage__v(e)}post__v(e){this.port_o.postMessage(e)}}const STAT_o={worker_o:null,get_scan_a:["burst","__reserved__","paint"],eventKey_a:[,"3"],canvas__e://!!! 4. from section
(e,s)=>document.querySelector(`#CA_${e}_${s}`),message__v(e){if("PUT_scan"===e.task_s){const e=document.body.dataset.stat_s;STAT_o.adopt__v(e),document.getElementById(`IN_${e}`).checked=!0,DOM_o.removeWait__v()}},putCanvas__v(e,s,t,_,o){for(let o of s){const s=STAT_o.canvas__e(e,o).transferControlToOffscreen();_.port_o.postMessage({task_s:"PUT_canvas",stat_s:e,hsl_s:o,canvas_e:s,script_s:t,pixel_n:window.devicePixelRatio},[s])}},worker__o(e,s,t,_){const o=new WorkerClient({url_s:"/assets/scripts/js/stat_w.min.js",stat_s:e,handleMessage__v:_});switch(e){case"burst":case"__reserved__":case"paint":STAT_o.putCanvas__v(e,s,t,o)}return o},adopt__v(e){document.getElementById(`IF_${e}`)&&IND_o.adopt__v(e,//!!! section id=stat_s
`IF_${e}`,((s,t)=>{const _=t.querySelector(`#script_${e}`);_&&(_.src=_.dataset.src)}))},eventKey__v(e,s){if(!STAT_o.eventKey_a.includes(e.key))return;if(e.preventDefault(),"3"===e.key)document.getElementById(`${s}`)&&STAT_o.adopt__v(s),document.getElementById(`IN_${s}`).checked=!0},listener__v(){for(let e of["burst","aster","paint","match"]){document.getElementById(`LA_${e}`)&&DOM_o.event__v("keydown",(s=>STAT_o.eventKey__v(s,e)))}},init__v(e){if(STAT_o.worker_o=new WorkerClient({url_s:"/assets/scripts/js/stat_w.min.js",stat_s:"stat",handleMessage__v:STAT_o.message__v}),STAT_o.get_scan_a.includes(e)){const s=JSON.parse(sessionStorage.getItem(e));STAT_o.worker_o.post__v({task_s:"GET_scan",stat_s:"stat",src_s:s.src_s})}}};STAT_o.listener__v();