
class WorkerClient{constructor(e){this.url_s=e.url_s,this.client_s=e.client_s,this.handleMessage__v=e.handleMessage__v,this.port_o=null,this.init__v()}init__v(){const e=new SharedWorker(this.url_s);this.port_o=e.port,this.port_o.onerror=this.error__v,this.port_o.onmessage=e=>this.message__v(e.data)}error__v(e){console.log`ERROR: ${e.message}`}message__v(e){e.client_s&&e.client_s!==this.client_s||this.handleMessage__v(e)}post__v(e){this.port_o.postMessage(e)}}const STAT_o={worker_o:null,elementDim__n:(e,s="width")=>+window.getComputedStyle(document.querySelector(e))[s].slice(0,-2),canvas__e(e,s){const t=document.querySelector(`#${e}`),_=document.createElement("canvas");_.id=`canvas_${e}_${s}`;let o=2048*window.devicePixelRatio;_.width=o,_.height=o;const r=t.querySelector(`#DI_${e}`);return r.insertBefore(_,r.querySelector("script")),_},message__v(e){e.task_s},worker__o(e,s,t){const _=new WorkerClient({url_s:"/assets/scripts/js/stat_w.min.js",client_s:e,handleMessage__v:s});switch(e){case"burst":for(let s of["hue","sat","lum"]){const o=STAT_o.canvas__e(e,s).transferControlToOffscreen();_.port_o.postMessage({client_s:e,id_s:s,script_s:t,task_s:"PUT_canvas",pixel_n:window.devicePixelRatio,canvas_e:o},[o])}}return _},adopt__v(e){document.getElementById(`IF_${e}`)&&IND_o.adopt__v(e,//!!! section id=stat_s
`IF_${e}`,((s,t)=>{const _=t.querySelector(`#script_${e}`);_&&(_.src=_.dataset.src)}))},scanner__v(){const e=document.querySelector('img[src$="/full/max/0/color.jpeg"]');console.log(e)},listener__v(){for(let e of["burst","aster","paint"]){const s=document.getElementById(`LA_${e}`);s&&s.addEventListener("click",(()=>STAT_o.adopt__v(e)),{once:!0})}},init__v(e){STAT_o.worker_o=new WorkerClient({url_s:"/assets/scripts/js/stat_w.min.js",client_s:"stat",handleMessage__v:STAT_o.message__v}),STAT_o.worker_o.post__v({client_s:"stat",task_s:"GET_scan",work_s:e})}};STAT_o.listener__v();