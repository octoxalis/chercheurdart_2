
const IFR_o={adopt__v://!!! ensure id_s
(e,t,o)=>{try{const n=document.getElementById(e),c=(n.contentDocument.body||n.contentDocument).children[0];document.getElementById(t).appendChild(c),o&&o(n,c),n.remove()}catch(e){console.log(`ERROR DETECTED @iframe.js: ${e}`)}}},IND_o={eventKey_a:["0","1","2"],keySection_o:{1:"article",2:"galerie"},href_s:"",service__v(){navigator.serviceWorker.register("https://chercheurdart-2.netlify.app/service_worker.min.js",{scope:"/"}).then((()=>{}),(e=>console.log(`ServiceWorker registration failed [error: ${e}]`)))},adopt__v(e,t,o){try{const n=document.getElementById(t),c=(n.contentDocument.body||n.contentDocument).children[0];document.getElementById(e).appendChild(c),o&&o(n,c),n.remove()}catch(e){console.log(`ERROR DETECTED @iframe.js: ${e}`)}},eventKey__v(e){if(!IND_o.eventKey_a.includes(e.key))return;switch(e.preventDefault(),e.key){case"0":location="index.html";break;case"1":case"2":const t=document.getElementById(`IN_${IND_o.keySection_o[e.key]}`);t&&(t.checked=!0)}},zoom__v(e){const t=location.hash,o=document.getElementById(t.substring(1)).querySelector("img");document.getElementById("IN_aside_zoom");document.getElementById("IN_aside_zoom").checked?(o.parentNode.setAttribute("href",t),DRAG_o.init__v(o),DRAG_o.enable__v()):(DRAG_o.disable__v(),o.parentNode.setAttribute("href",t.replace("AC","AG")),o.setAttribute("style",""))},async expo__v(e){const t=document.getElementById(location.hash.substring(1)),o=t.id,n=document.querySelector("#G"+o.substring(2)+" figcaption"),c=t.querySelector("img");let r=c.src;r=r.substring("https://chercheurdart-2.netlify.app/assets/media/img/".length,r.lastIndexOf(".")),LOC_o.idb_o.set__v(r,JSON.stringify({id_s:o,order_n:0,display_b:!0,caption_s:n.innerHTML,width_s:c.naturalWidth,height_s:c.naturalHeight})),DIA_o.open__v({LA:"Opération terminée",PA:"L'image a été accrochée sur les cimaises",option_a:["accept"]}),await DIA_o.confirm__b()},burst__v(e){const t=document.getElementById(location.hash.substring(1)).querySelector("img"),o=t.src.replace("avif","jpeg");location.href=`burst.html?s=${o}&w=${t.naturalWidth}&h=${t.naturalHeight}`},listener__v(){for(let e of["comment_label"]){const t=document.getElementById(e);t&&t.addEventListener("click",IND_o[`${e}__v`],{once:!0})}for(let e of Array.from(document.querySelectorAll('[name="main_nav"]')))e.addEventListener("click",(()=>{location.hash&&(location.hash="")}));for(let e of Array.from(document.querySelectorAll("label[id^=goto]")))e.addEventListener("click",(()=>{window.scroll({top:0,left:0,behavior:"smooth"})}));let e=document.getElementById("IN_aside_zoom");e&&e.addEventListener("change",IND_o.zoom__v);for(let e of["burst","expo"]){const t=document.getElementById(`LA_aside_${e}`);t&&t.addEventListener("click",IND_o[`${e}__v`])}DOM_o.event__v("keydown",(e=>IND_o.eventKey__v(e)))},comment_label__v(){IND_o.adopt__v("comments","comment_iframe",((e,t)=>{t.querySelector("#issue").value=e.dataset.issue_n}))},init__v(){IND_o.service__v(),window.onload=async()=>{IND_o.listener__v();const{stat_s:e,work_s:t}=document.querySelector("body").dataset;if(e){const o=await LOC_o.search__("k");STAT_o.init__v(e,o||t)}}}};IND_o.init__v();