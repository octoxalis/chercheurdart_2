
const IFR_o={adopt__v://!!! ensure id_s
(e,t,o)=>{try{const n=document.getElementById(e),r=(n.contentDocument.body||n.contentDocument).children[0];document.getElementById(t).appendChild(r),o&&o(n,r),n.remove()}catch(e){console.log(`ERROR DETECTED @iframe.js: ${e}`)}}},DATE_o={dataTimeNumeric__s(e,t=!0,o=(new Date).toISOString()){let n=o;return e&&(n=new Intl.DateTimeFormat(e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(new Date(o))),t&&(n=n.replaceAll("/","-").replaceAll(":","-").replaceAll(" ","_").replace("T","_").replace("Z","")),n}},IND_o={eventKey_a:["0","1","2"],keySection_o:{1:"article",2:"galerie"},href_s:"",service__v(){navigator.serviceWorker.register("https://chercheurdart-2.netlify.app/service_worker.min.js",{scope:"/"}).then((()=>{}),(e=>console.log(`ServiceWorker registration failed [error: ${e}]`)))},adopt__v(e,t,o){try{const n=document.getElementById(t),r=(n.contentDocument.body||n.contentDocument).children[0];document.getElementById(e).appendChild(r),o&&o(n,r),n.remove()}catch(e){console.log(`ERROR DETECTED @iframe.js: ${e}`)}},eventKey__v(e){if(!IND_o.eventKey_a.includes(e.key))return;switch(e.preventDefault(),e.key){case"0":location="index.html";break;case"1":case"2":const t=document.getElementById(`IN_${IND_o.keySection_o[e.key]}`);t&&(t.checked=!0)}},zoom__v(e){let t,o,n=document.getElementById("img_reserve_img");if(!n)if(o=document.getElementById("expo"),o){if(n=EXP_o.full_e,!n)return}else t=location.hash,n=document.getElementById(t.substring(1)).querySelector("img");document.getElementById("IN_toolset_zoom");document.getElementById("IN_toolset_zoom").checked?(t&&n.parentNode.setAttribute("href",t),DRAG_o.init__v(n),DRAG_o.enable__v()):(DRAG_o.disable__v(),o&&(n.classList.toggle("fullsize"),EXP_o.full_e=null),n.setAttribute("style",""),t&&n.parentNode.setAttribute("href",t.replace("AC","AG")))},async expo__v(e){const t=document.getElementById(location.hash.substring(1)),o=t.id,n=document.querySelector("#G"+o.substring(2)+" figcaption"),r=t.querySelector("img"),c="IND:"+DATE_o.dataTimeNumeric__s();IDB_o.idb_o.set__v(c,JSON.stringify({id_s:o,order_n:0,display_b:!0,caption_s:n.innerHTML,width_s:r.naturalWidth,height_s:r.naturalHeight,src_s:r.src})),DIA_o.open__v({LA:"Opération terminée",PA:"L'image a été accrochée sur les cimaises",option_a:["accept"]}),await DIA_o.confirm__b()},burst__v(e){const t=document.getElementById(location.hash.substring(1)).querySelector("img");sessionStorage.setItem("burst",JSON.stringify({origin_s:"index",src_s:t.src.replace("avif","jpeg"),width_s:+t.naturalWidth,height_s:+t.naturalHeight})),location.href="burst.html"},listener__v(){for(let e of["comment_label"]){const t=document.getElementById(e);t&&t.addEventListener("click",IND_o[`${e}__v`],{once:!0})}for(let e of Array.from(document.querySelectorAll('[name="main_nav"]')))e.addEventListener("click",(()=>{location.hash&&(location.hash="")}));for(let e of Array.from(document.querySelectorAll("label[id^=goto]")))e.addEventListener("click",(()=>{window.scroll({top:0,left:0,behavior:"smooth"})}));let e=document.getElementById("IN_toolset_zoom");e&&e.addEventListener("change",IND_o.zoom__v);const t=location.href,o=t.indexOf("/","https://".length+1)+1;for(let e of["burst","expo"]){if(t.includes("reserve",o)||t.includes("expo",o))continue;const n=document.getElementById(`LA_toolset_${e}`);n&&n.addEventListener("click",IND_o[`${e}__v`])}DOM_o.event__v("keydown",(e=>IND_o.eventKey__v(e)))},comment_label__v(){IND_o.adopt__v("comments","comment_iframe",((e,t)=>{t.querySelector("#issue").value=e.dataset.issue_n}))},async init__v(){IND_o.service__v(),window.onload=()=>{IND_o.listener__v();const{stat_s:e}=document.querySelector("body").dataset;e&&STAT_o.init__v(e)}}};IND_o.init__v();