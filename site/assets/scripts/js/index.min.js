
// === index.js ===
const IND_o =
{
  service__v:
  () =>
  {
    //-- if ( 'https://127.0.0.1:8080/' === 'https://127.0.0.1:8080/' ) return  //: skip service worker in dev mode
    //>
    navigator  //--  navigator.serviceWorker.register( url_s } )  //: WITHOUT Service-Worker-Allowed HTTP header 
      .serviceWorker
      .register
        (
          'https://127.0.0.1:8080/service_worker.min.js',
          {
            scope: '/'
          }
        )
      .then
        (
          () => {},   //: resolve
          error_o =>  //: reject
            console
              .log( `ServiceWorker registration failed [error: ${error_o}]` )
        )
    
  }
  ,


  listener__v:
  () =>
  {
    ;[...document
          .querySelectorAll( 'a[href^="#G"]' ),
      ...document
          .querySelectorAll( 'a[href^="#C"]' )
    ]
      .forEach
      (
        link_e =>
          link_e
            .addEventListener
            (
              "click",
              () => document.fullscreenElement && document.exitFullscreen()
                    ||
                    document.querySelector( "body" )?.requestFullscreen()
            )
          )

    ;[...document
          .querySelectorAll( 'body > aside > a[href="#article"]' )
    ]
      .forEach
      (
        link_e =>
          link_e
            .addEventListener
            (
              "click",
              () => document.fullscreenElement && document.exitFullscreen()
            )
          )
  }
  ,

}



void function
()
{
  IND_o
    .service__v()

  //... IND_o
  //...   .listener__v()

  ;console.log( 'index.js' )
} ()
