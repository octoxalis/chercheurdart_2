
const DATE_o={dataTimeNumeric__s(e=!0,t=(new Date).toISOString(),r="fr-FR"){let n=new Intl.DateTimeFormat(r,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}).format(new Date(t));return e&&(n=n.replaceAll("/","-").replaceAll(":","-").replaceAll(" ","_")),n}};UI_o={rangeVar__v(e,t){const r=e.value;e.dataset.tip=r,t&&DOM_o.rootVar__v(`--${t}`,r)}};var RES_o={href_s:"",full_e:null,eventKey_a:[,"3","b","e"],show__v(e){document.getElementById("img_reserve_img").src=e.currentTarget.dataset.href_s,document.getElementById("IN_toolset").checked=!0},async expo__v(e){const t=document.getElementById("img_reserve_img");let r=t.src,n=`<dl>${document.querySelector(`dl[data-href_s="${r}"]`).innerHTML.replaceAll(/\s{2}/g,"")}</dl>`,_=r.substring("https://chercheurdart-2.netlify.app/assets/media/img/reserve/".length);LOC_o.idb_o.set__v("re:"+_,JSON.stringify({id_s:_,order_n:0,display_b:!0,caption_s:n,width_s:t.naturalWidth,height_s:t.naturalHeight})),DIA_o.open__v({LA:"Opération terminée",PA:`${n} a été accrochée sur les cimaises`,option_a:["accept"]}),await DIA_o.confirm__b()},async burst__v(){const e=document.getElementById("img_reserve_img");location.href=`burst.html?s=${e.src}&w=${e.naturalWidth}&h=${e.naturalHeight}`},async eventKey__v(e){if(document.querySelector("#dialog_work_caption[open]")||!RES_o.eventKey_a.includes(e.key))return;switch(e.preventDefault(),e.key){case"3":document.getElementById("IN_reserve").checked=!0;break;case"b":document.getElementById("img_reserve_img").src&&RES_o.burst__v()}},listener__v(){document.body.addEventListener("keydown",RES_o.eventKey__v,{passive:!1});for(let e of Array.from(document.querySelectorAll("[data-href_s]")))e.addEventListener("click",RES_o.show__v);for(let e of["burst","expo"]){const t=document.getElementById(`LA_toolset_${e}`);t&&t.addEventListener("click",RES_o[`${e}__v`])}DOM_o.event__v("keydown",(e=>RES_o.eventKey__v(e)))},init__v(){RES_o.listener__v(),document.getElementById("IN_reserve").checked=!0}};RES_o.init__v();