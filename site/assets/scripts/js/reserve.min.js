
const FUL_o={listener__v:()=>{const e=document.getElementById("goto_full_screen");e&&e.addEventListener("click",(()=>document.fullscreenElement&&document.exitFullscreen()||document.querySelector("body")?.requestFullscreen()))}};UI_o={rangeVar__v(e,t){const _=e.value;e.dataset.tip=_,t&&DOM_o.rootVar__v(`--${t}`,_)}};var RES_o={href_s:"",eventKey_a:[,"3","b","e"],show__v(e){document.getElementById("img_reserve_img").src=e.currentTarget.dataset.href_s,document.getElementById("IN_toolset").checked=!0},async expo__v(e){const t=document.getElementById("img_reserve_img");let _=t.src,r=`<dl>${document.querySelector(`dl[data-href_s="${_}"]`).innerHTML.replaceAll(/\s{2}/g,"")}</dl>`,n=_.substring("https://chercheurdart-2.netlify.app/assets/media/img/reserve/".length);const s="RES:"+DATE_o.dataTimeNumeric__s();IDB_o.idb_o.set__v(s,JSON.stringify({id_s:n,order_n:0,display_b:!0,caption_s:r,width_s:t.naturalWidth,height_s:t.naturalHeight,src_s:t.src})),DIA_o.open__v({LA:"Opération terminée",PA:`${r} a été accrochée sur les cimaises`,option_a:["accept"]}),await DIA_o.confirm__b()},async burst__v(){const e=document.getElementById("img_reserve_img");sessionStorage.setItem("burst",JSON.stringify({origin_s:"reserve",src_s:e.src,width_s:+e.naturalWidth,height_s:+e.naturalHeight})),location.href="burst.html"},async eventKey__v(e){if(document.querySelector("#dialog_work_caption[open]")||!RES_o.eventKey_a.includes(e.key))return;switch(e.preventDefault(),e.key){case"3":document.getElementById("IN_reserve").checked=!0;break;case"b":document.getElementById("img_reserve_img").src&&RES_o.burst__v()}},listener__v(){document.body.addEventListener("keydown",RES_o.eventKey__v,{passive:!1});for(let e of Array.from(document.querySelectorAll("[data-href_s]")))e.addEventListener("click",RES_o.show__v);for(let e of["burst","expo"]){const t=document.getElementById(`LA_toolset_${e}`);t&&t.addEventListener("click",RES_o[`${e}__v`])}DOM_o.event__v("keydown",(e=>RES_o.eventKey__v(e)));document.getElementById("goto_full_screen")&&FUL_o.listener__v()},init__v(){RES_o.listener__v(),document.getElementById("IN_reserve").checked=!0}};RES_o.init__v();