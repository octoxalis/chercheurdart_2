
const PAI_o={status_o:null,SCALE_H_n:1,SCALE_V_n:2,hue_o:{grade_n:0,gap_n:0},sat_o:{grade_n:0,gap_n:0},lum_o:{grade_n:0,gap_n:0},message__v:e=>{switch(e.task_s){case"PUT_status":PAI_o.status_o=e.status_o;break;case"PUT_error":console.log(`ERROR: ${e.error_s}`)}},range__v:e=>{const _=e.value;e.dataset.tip=_;const[,,a,t]=e.id.split("_");PAI_o[`${a}_o`][`${t}_n`]=+_},canvas__v:(e,_,a)=>{PAI_o.SCALE_H_n,PAI_o.SCALE_V_n},canvas__e:(e,_)=>{const a=document.createElement("canvas");return _&&_(a),a},addLayer__v:e=>{const _=document.getElementById("DI_paint_layer_items").children.length;let a="",t="",n="";_&&(t=`input_${e}_${_}`,a=`<input id="${t}" data-layer_n=${_} type="checkbox">`,n=`for="${t}"`),DOM_o.appendNode__v(DOM_o.fragment__e(`<li data-layer_n=${_}>`+a+`<label ${n}>niveau ${_+1}</label></li>`),"DI_paint_layer_items"),DOM_o.beforeNode__v(PAI_o.canvas__e(e,(e=>{e.dataset.layer_n=_,e.dataset.size_n=1,document.documentElement.style.setProperty(`--paint_canvas_ratio_${_}`,1)})),"paint_settings"),DOM_o.fragment__e(`<li data-layer_n=${_}>\n          <input  id="IN_paint_layer_animation_play_${_}" data-layer_n=${_} name=paint_animation type="radio">\n          <label for="IN_paint_layer_animation_play_${_}">\n            <svg class="svg_icon">\n              <use href="#stack_circle"></use>\n              <title>${_} &#8942; ${e}</title>\n            </svg>\n          </label>\n        </li>`,"LI_paint_layer_animation_play")},selected__a:()=>Array.from(document.querySelectorAll("#DI_paint_layer_items > li[data-layer_n] > input:checked")),hide__v:e=>{for(selected_e of PAI_o.selected__a()){const e=selected_e.dataset.layer_n;for(node_e of Array.from(document.querySelectorAll(`[data-layer_n="${e}"]`)))node_e.dataset.layer_b=0,node_e.checked&&(node_e.checked=!1)}},imgResize__v:e=>{for(selected_e of PAI_o.selected__a()){const _=selected_e.dataset.layer_n;for(canvas_e of Array.from(document.querySelectorAll(`canvas[data-layer_n="${_}"]`))){let a=e+ +canvas_e.dataset.size_n;canvas_e.dataset.size_n=a,document.documentElement.style.setProperty(`--paint_canvas_ratio_${_}`,a)}}},increase__v:e=>{PAI_o.imgResize__v(.025)},decrease__v:e=>{PAI_o.imgResize__v(-.025)},listener__v(){for(let e of["hue","sat","lum"]){for(let _ of["grade","gap"]){const a=document.getElementById(`IN_paint_${e}_${_}`);for(let e of["click","keydown"])a&&a.addEventListener(e,(e=>{PAI_o.range__v(e.target)}))}const _=document.getElementById(`canvas_paint_${e}`);_&&_.addEventListener("click",(e=>{const{offsetX:_,offsetY:a}=e;PAI_o.canvas__v(e.target.id,_,a)}))}const e=document.getElementById("LA_paint_layer_add");e&&e.addEventListener("click",(e=>{PAI_o.addLayer__v(document.querySelector("body").dataset.work_s)}))},init__v(){PAI_o.worker_o=STAT_o.worker__o("paint","LogScale Painter",PAI_o.message__v),PAI_o.addLayer__v(document.querySelector("body").dataset.work_s),PAI_o.listener__v()}};PAI_o.init__v();