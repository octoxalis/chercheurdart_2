
const MATCH_o={status_o:null,drag_c:null,message__v:e=>{switch(e.task_s){case"PUT_status":MATCH_o.status_o=e.status_o;break;case"PUT_error":console.log(`ERROR: ${e.error_s}`)}},appendNode__v:(e,t)=>{document.getElementById(t)?.appendChild(e)},beforeNode__v:(e,t)=>{const _=document.getElementById(t);_&&_.parentNode.insertBefore(e,_)},fragment__e:(e,t)=>{const _=document.createRange().createContextualFragment(e);return t?MATCH_o.beforeNode__v(_,t):_},img__e:(e,t)=>{const _=document.createElement("img");return _.addEventListener("load",(e=>t&&t(_))),_.src=`assets/media/img/${e}/full/max/0/color.avif`,_},addWork__v:e=>{const t=document.getElementById("DI_match_layers_items").children.length;let _="",a="",o="";t&&(a=`input_${e}_${t}`,_=`<input id="${a}" data-layer_n=${t} type="checkbox">`,o=`for="${a}"`),MATCH_o.appendNode__v(MATCH_o.fragment__e(`<li data-layer_n=${t}>`+_+`<label ${o}>${e}</label></li>`),"DI_match_layers_items"),MATCH_o.beforeNode__v(MATCH_o.img__e(e,(_=>{_.id=`img_${e}_${t}`,_.dataset.layer_n=t,_.dataset.size_n=1,document.documentElement.style.setProperty(`--match_img_ratio_${t}`,1)})),"match_scale"),MATCH_o.fragment__e(`<li data-layer_n=${t}>\n          <input  id="IN_match_layer_animation_play_${t}" data-layer_n=${t} name=match_animation type="radio">\n          <label for="IN_match_layer_animation_play_${t}">\n            <svg class="svg_icon">\n              <use href="#match_circle"></use>\n              <title>${t} &#8942; ${e}</title>\n            </svg>\n          </label>\n        </li>`,"LI_match_layer_animation_play")},add_remote__v:e=>{document.getElementById(`IF_match_${e}`)&&IND_o.adopt__v("DI_match_settings",`IF_match_${e}`,((e,t)=>{const _=t.querySelector("#script_match_imgs");_&&(_.src=_.dataset.src)}))},selected__a:()=>Array.from(document.querySelectorAll("#DI_match_layers_items > li[data-layer_n] > input:checked")),add_local:e=>{console.log("add_local")},hide__v:e=>{for(selected_e of MATCH_o.selected__a()){const e=selected_e.dataset.layer_n;for(node_e of Array.from(document.querySelectorAll(`[data-layer_n="${e}"]`)))node_e.setAttribute("data-layer_b","0"),node_e.checked&&(node_e.checked=!1),node_e.draggable&&node_e.removeAttribute("draggable"),node_e.classList.contains("layer_align")&&node_e.classList.remove("layer_align")}},imgResize__v:e=>{for(selected_e of MATCH_o.selected__a()){const t=selected_e.dataset.layer_n;for(img_e of Array.from(document.querySelectorAll(`img[data-layer_n="${t}"]`))){let _=e+ +img_e.dataset.size_n;img_e.dataset.size_n=_,document.documentElement.style.setProperty(`--match_img_ratio_${t}`,_)}}},increase__v:e=>{MATCH_o.imgResize__v(.025)},decrease__v:e=>{MATCH_o.imgResize__v(-.025)},align__v:e=>{const t=MATCH_o.selected__a()?.[0];if(!t){alert("Aucune image n'est sélectionnée");const e=document.querySelector("#IN_match_align");return console.log(e),void(e.checked=!1)}const _=t?.dataset?.layer_n,a=document.querySelector(`img[data-layer_n="${_}"]`),o=document.querySelector("#IN_match_align:checked")?"remove":"add";a.classList[`${o}`]("layer_align");const n="add"===o?"set":"remove";a[`${n}Attribute`]("draggable","set"===n);for(let e of["offx","offy"])a.dataset[e]||(a.dataset[e]=0);MATCH_o.toggleSettings__v("add"===o),"remove"!==o?MATCH_o.drag_c?MATCH_o.drag_c.enable__v():MATCH_o.drag_c=new DragElement(a):MATCH_o?.drag_c?.disable__v()},toggleSettings__v:(e=!1)=>{document.getElementById("IN_match_img").checked=e,document.getElementById("IN_match_settings").checked=!e},listener__v(){for(op_e of Array.from(document.querySelectorAll('[id^="match_scale_"]')))op_e.addEventListener("click",(e=>{const t=e.target.id.slice(-3),_=window.getComputedStyle(document.documentElement).getPropertyValue("--match_img_width"),a="inc"===t?5:-5;document.documentElement.style.setProperty("--match_img_width",+_+a)}));for(let e of["add_remote","add_local","hide","increase","decrease","align"]){const t=document.getElementById(`LA_match_${e}`);t&&t.addEventListener("click",(t=>MATCH_o[`${e}__v`](e)))}},init__v(){MATCH_o.addWork__v(document.querySelector("body").dataset.work_s),MATCH_o.listener__v()}};MATCH_o.init__v();