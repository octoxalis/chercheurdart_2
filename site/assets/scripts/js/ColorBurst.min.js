
class ColorBurst{constructor(t){Object.assign(this,t),this.unit_n=360*Math.PI*2/t.range_n,this.paint_c=new Painter(t.canvas_o.getContext("2d")),t.onHueChange&&this.canvas_o.addEventListener("click",this,!1),t.onHueTrace&&this.canvas_o.addEventListener("mousemove",this,!1),this.draw__v()}coord__a(t,n){const s=t*this.unit_n;return[~~(n*Math.cos(s)+this.median_n),~~(n*Math.sin(s)+this.median_n)]}draw__v(t){console.time("draw__v");
//!!!!!!!!!!!!!!!!!!!!!!!!!!
const n=(t||1)/this.color_a.length,s=new LogScale({minpos_n:0,maxpos_n:400,minval_n:0,maxval_n:this.maxfreq_n});let a=0;for(let t of this.color_a){if(t){const i=s.position__i(t.frequency_n),[_,e]=this.coord__a(a,i);a+=n;const[o,c]=this.coord__a(a,i);this.paint_c.fill__c(t.hsl_a).path__c(`M ${_} ${e} A 1 1 0 0 1 ${o} ${c} L ${this.median_n} ${this.median_n}`)}else a+=n;0}
//!!!!!!!!!!!!!!!!!!!!!!!!!!
console.timeEnd("draw__v");
//!!!!!!!!!!!!!!!!!!!!!!!!!!
}clear__v(){this.canvas_o.getContext("2d").clearRect(0,0,this.canvas_o.width,this.canvas_o.height)}}