
class ColorBurst{constructor(t){Object.assign(this,t),this.context_o=t.canvas_o.getContext("2d"),this.unit_n=2*t.capacity_n*Math.PI/t.capacity_n,this.paint_c=new Painter(this.context_o),this.clearWidth_n=this.canvas_o.width,this.clearHeight_n=this.canvas_o.height,this.draw__v()}coord__a(t,n){const s=t*this.unit_n-.5*Math.PI;return[~~(n*Math.cos(s)+this.median_n),~~(n*Math.sin(s)+this.median_n)]}draw__v(t=1){
//!!!!!!!!!!!!!!!!!!!!!!!!!!
//!!!!!!!!!!!!!!!!!!!!!!!!!!
const n=t/this.frequency_a.length;let s,_,i=[],e=this.maxfreq_n;for(let t of this.frequency_a)if(t){const n=t.frequency_n;n>this.maxfreq_n&&(e=n)}100===this.thresh_o.hi_n&&0===this.thresh_o.lo_n?(s=e,_=0):(s=e-e*(.01*(100-this.thresh_o.hi_n)),_=e*this.thresh_o.lo_n*.01);for(let t of this.frequency_a){const n=t?.frequency_n;n>0?i.push(n<=s&&n>=_?t:null):i.push(null)}const h=new LogScale({minpos_n:0,maxpos_n:this.maxpos_n,minval_n:0,maxval_n:e});let o=0;this.clear__v();for(let t of i){if(t){const s=h.position__n(t.frequency_n),[_,i]=this.coord__a(o,s);o+=n;const[e,a]=this.coord__a(o,s);this.paint_c.fill__c(t.hsl_a).path__c(`M ${_} ${i}\n                 A 0 0 0 0 0 ${e} ${a}\n                 L ${this.median_n} ${this.median_n}`)}else o+=n;0}
//!!!!!!!!!!!!!!!!!!!!!!!!!!
//!!!!!!!!!!!!!!!!!!!!!!!!!!
}clear__v(){this.context_o.save(),this.context_o.clearRect(0,0,this.clearWidth_n,this.clearHeight_n),this.context_o.restore()}reset__v(){this.context_o.resetTransform()}}