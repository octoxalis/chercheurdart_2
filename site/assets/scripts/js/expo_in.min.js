
const EXI_o={order__n(){const _=+DOM_o.rootVar__s("--expo_order_n")+1;return DOM_o.rootVar__v("--expo_order_n",_),_},async index__n(){let _=0;return await IDB_o.idb_o.walk__v(((e,o)=>{JSON.parse(o);const r=o.order_n;r>_&&(_=r)})),_},async add__v(_){const e=_.target.closest("figure"),o=e.querySelector("img");o.src;const r="IND:"+DATE_o.dataTimeNumeric__s(),t=e.id,n=document.querySelector("#G"+t.substring(2)+" figcaption");IDB_o.idb_o.set__v(r,JSON.stringify({id_s:t,order_n:EXI_o.order__n(),display_b:!0,caption_s:n.innerHTML,width_s:o.naturalWidth,height_s:o.naturalHeight,src_s:o.src}))},async listener__v(){for(let _ of Array.from(document.querySelectorAll('figure > label[data-legend="exposition"]')))_.addEventListener("click",EXI_o.add__v);const _=await EXI_o.index__n();DOM_o.rootVar__v("--expo_n",_)},init__v(){EXI_o.listener__v()}};EXI_o.init__v();