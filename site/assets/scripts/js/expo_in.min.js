
const EXI_o={order__n(){const _=+DOM_o.rootVar__s("--expo_order_n")+1;return DOM_o.rootVar__v("--expo_order_n",_),_},async index__n(){let _=0;return await LOC_o.idb_o.walk__v(((e,r)=>{JSON.parse(r);const t=r.order_n;t>_&&(_=t)})),_},async add__v(_){const e=_.target.closest("figure"),r=e.querySelector("img");let t=r.src;t=t.substring("https://chercheurdart-2.netlify.app/assets/media/img/".length,t.lastIndexOf("."));const o=e.id,n=document.querySelector("#G"+o.substring(2)+" figcaption");LOC_o.idb_o.set__v(t,JSON.stringify({id_s:o,order_n:EXI_o.order__n(),display_b:!0,caption_s:n.innerHTML,width_s:r.naturalWidth,height_s:r.naturalHeight}))},listener__v(){for(let _ of Array.from(document.querySelectorAll('figure > label[data-legend="exposition"]')))_.addEventListener("click",EXI_o.add__v);DOM_o.rootVar__v("--expo_n",EXI_o.index__n())},init__v(){EXI_o.listener__v()}};EXI_o.init__v();