
const EXI_o={order__n(){const _=+DOM_o.rootVar__s("--expo_order_n")+1;return DOM_o.rootVar__v("--expo_order_n",_),_},async index__n(){let _=0;return await LOC_o.idb_o.walk__v(((e,t)=>{JSON.parse(t);const o=t.order_n;o>_&&(_=o)})),_},async add__v(_){const e=_.target.closest("figure"),t=e.querySelector("img");let o=t.src;o=o.substring("https://chercheurdart-2.netlify.app/assets/media/img/".length,o.lastIndexOf("."));const r=e.id,n=document.querySelector("#G"+r.substring(2)+" figcaption");LOC_o.idb_o.set__v(o,JSON.stringify({id_s:r,order_n:EXI_o.order__n(),display_b:!0,caption_s:n.innerHTML,width_s:t.width,height_s:t.height}))},listen__v(){for(let _ of Array.from(document.querySelectorAll('figure > label[data-legend="exposition"]')))_.addEventListener("click",EXI_o.add__v);DOM_o.rootVar__v("--expo_n",EXI_o.index__n())},init__v(){EXI_o.listen__v()}};EXI_o.init__v();